<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  #canvas {
    background: lightgoldenrodyellow;
  }

  .video {
    width: 300px;
    /* visibility: hidden; */
  }
</style>

<body>
  <video id="video" controls autoplay loop  class="video">
    <source src="./img/1.MP4" type="video/mp4">
  </video>
  <canvas id="canvas" width="600" height="600"></canvas>
  <script>
    const canvas = document.getElementById('canvas')
    let ctx = canvas.getContext('2d')
    // 画图片
    // const img = new Image()
    // img.src = './img/cat.jpeg'
    // img.onload = function () {
    //   const { width, height } = img
    //   console.log(img);
    //   // 在0 0位置画图
    //   // ctx.drawImage(img, 0, 0)
    //   // 在0 0位置画图，缩放为一半
    //   // ctx.drawImage(img, 0, 0,width/2,height/2)
    //   ctx.drawImage(img,
    //   width/2, 0, width, height,
    //     0, 0, width, height)
    // }
    //  画视频
    let video = document.getElementById('video')
    let timer = null
    console.log(video)
    video.addEventListener('canplaythrough', function () {
      console.log('canplaythrough');
      setTimeout(()=>{
        ctx.drawImage(video, 0, 0, 300, 600)

      },0)
    })
    video.addEventListener('play', function () {
      timer = setInterval(() => {
        console.log(1);
        ctx.drawImage(video, 0, 0, 300, 600)
      }, 40)
    })
    video.addEventListener('pause', function () {
      console.log(2);
      clearInterval(timer)
    })
    function draw(){
      ctx.drawImage(img,
      size*fn,0,size,size,
      0,0,size,size)
      fm++
      if(fm===len){
        fm=0
      }
      setTimeout(draw,100)
    }
  </script>
</body>

</html>