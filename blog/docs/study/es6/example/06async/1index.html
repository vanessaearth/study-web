<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    function fn1() {
      return new Promise(resolve => {
        setTimeout(() => {
          resolve(1)
        }, 1000)
      })
    }
    function fn2() {
      return new Promise(resolve => {
        setTimeout(() => {
          resolve(2)
        }, 1000)
      })
    }
    function fn3() {
      return new Promise(resolve => {
        setTimeout(() => {
          resolve(3)
        }, 1000)
      })
    }
    function* myFn() {
      yield fn1();
      yield fn2();
      yield fn3();
    }
    // let fn = myFn()
    // fn.next().value.then(res=>{
    //   console.log('res',res)
    //   return fn.next().value
    // }).then(res2=>{
    //   console.log('res2',res2)
    //   return fn.next().value
    // }).then(res2=>{
    //   console.log('res3',res2)
    // })
    run(myFn)
    function run(genFn) {
      let g = genFn()
      function next() {
        let res = g.next()
        if (res.done) {
          console.log('res.done',res)
          return res.value
        } else {
          return res.value.then(res=>{
            console.log(res)
            next()
          })
        }
      }
      next()

    }
  </script>
</body>

</html>